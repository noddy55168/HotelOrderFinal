@model HotelOrderFinal.ViewModels.CRoomClassViewModel

@{
    ViewData["Title"] = "Detail";
}
<style>
    .facility-list {
        display: flex;
        flex-wrap: wrap;
        list-style: none;
    }

        .facility-list li {
            flex-basis: calc(100% / 6);
            max-width: calc(100% / 6);
            margin-bottom: 10px;
        }


    .myoverlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
    }

    .my-modal {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }

    .modal-image {
        max-width: 90%;
        max-height: 90%;
    }

    .close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 30px;
        color: white;
        cursor: pointer;
    }

    .mythumbnail {
        width: 100px; /* 設置小圖片的寬度 */
        height: auto; /* 根據寬度自動調整高度，保持圖片比例 */
    }

        .mythumbnail:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.5); /* 半白覆蓋的顏色和透明度 */
            opacity: 0; /* 初始時透明度為0 */
            transition: opacity 0.3s ease; /* 過渡效果，讓透明度變化平滑 */
        }

        .mythumbnail:hover:before {
            opacity: 1; /* 滑鼠懸停時透明度為1，顯示半白覆蓋 */
        }

</style>

<section class="breadcrumb_area">
    <div class="overlay bg-parallax" data-stellar-ratio="0.8" data-stellar-vertical-offset="0" data-background=""></div>
    <div class="container">
        <div class="page-cover text-center">
            <h2 class="page-cover-tittle">About Us</h2>
            <ol class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li class="active">Detail</li>
            </ol>
        </div>
    </div>
</section>

<div class="container">
<h2>房型介紹</h2>
<hr>
<div class="row">
    <div class="col-md-4">
        <div class="container">
            <img class="image enlarge-image" src="~/image/room/@Model.RoomClass.RoomClassPhoto1" width="320" height="240" />          
               
            <div id="thumbnail-container">
                <img class="mythumbnail" src="~/image/room/@Model.RoomClass.RoomClassPhoto1">
                <img class="mythumbnail" src="~/image/room/@Model.RoomClass.RoomClassPhoto2">
                <img class="mythumbnail" src="~/image/room/@Model.RoomClass.RoomClassPhoto3">
            </div>


            <div class="myoverlay" id="myoverlay">
                <div class="my-modal">
                    <span class="close" id="close">&times;</span>
                    <img src="" class="modal-image" alt="Modal Image">
                </div>
            </div>
        </div>

    </div>
    <div class="col-md-8">
        <h2>@Html.DisplayFor(model => model.RoomClass.RoomClassName)</h2>
        <p>@Html.DisplayFor(model => model.RoomClass.RoomClassDetail)</p>
        <h4>房間設備</h4>
        <ul class="facility-list">
            @foreach (var facility in Model.Facility)
            {
                <li>
                    <img src="~/image/facility/@facility.FacilityImage" alt="@facility.FacilityName" />
                    @facility.FacilityName
                </li>
            }
        </ul>

        <a href="#"><h5 class="sec_h4">價格:</h5></a>
        <ul style="list-style-type:none">
            <li><h5>平日：NT$@Html.DisplayFor(model => model.RoomClass.WeekdayPrice)</h5></li>
            <li><h5>假日：NT$@Html.DisplayFor(model => model.RoomClass.HolidayPrice)</h5></li>
        </ul>
    </div>
</div>

@Html.ActionLink("立即預約", "Index", "Order", null, new { @class = "book_now_btn button_hover" })
</div>

@section Scripts{
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const images = document.querySelectorAll('.enlarge-image');
            const myoverlay = document.getElementById('myoverlay');
            const modalImage = document.querySelector('.modal-image');
            const closeButton = document.getElementById('close');

            images.forEach(function (image) {
                image.addEventListener('click', function () {
                    console.log('Image clicked'); // 檢查圖片點擊事件是否正確觸發

                    myoverlay.style.display = 'flex';
                    var imagePath = image.getAttribute('src').replace('~', '');
                    modalImage.src = imagePath;
                    console.log('Image path:', imagePath); // 檢查圖片路徑是否正確設置
                });
            });

            closeButton.addEventListener('click', function () {
                console.log('Close button clicked'); // 檢查關閉按鈕點擊事件是否正確觸發

                myoverlay.style.display = 'none';
            });

            myoverlay.addEventListener('click', function (event) {
                console.log('Overlay clicked'); // 檢查覆蓋層點擊事件是否正確觸發

                if (event.target === myoverlay) {
                    myoverlay.style.display = 'none';
                }
            });
        });

        window.onload = function () {
            // 獲取所有小圖片元素
            const thumbnails = document.querySelectorAll('.mythumbnail');

            // 為每個小圖片元素添加點擊事件監聽器
            thumbnails.forEach((mythumbnail) => {
                mythumbnail.addEventListener('click', () => {
                    // 當小圖片被點擊時，將大圖片的src屬性設置為點擊的小圖片的src屬性
                    const bigImage = document.querySelector('.enlarge-image');
                    bigImage.src = mythumbnail.src;
                });
            });
        };

    </script>
}
